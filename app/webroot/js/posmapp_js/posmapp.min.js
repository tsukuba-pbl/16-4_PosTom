function removebookmark(e){var t=getBookmarks(),o=t.indexOf(e);t.splice(o,1);var a=$("#bookmarkbutton");$("#bookmarkbutton").attr("src",webroot+"img/unbookmark.png"),$("#listbookmark"+e).attr("src",webroot+"img/unbookmark.png"),saveLog("unbookmark",{presenid:e,page:window.location.hash});var s=getPosterid(e);if(s!==-1){var n,r="none",i=[null,"Top","Right","Bottom","Left"];if(null!==a){for(var l,s=getPosterid(e),c=0;c<poster.length;c++)poster[c].posterid==s,l=poster[c],s=c;n=document.getElementById("star"+i[l.star]+"No"+s),n.style.display=r}}return bookmarks=t.join(","),localStorage.setItem("bookmarks",bookmarks),bookmarks}function initData(){localStorage.getItem("downloadSuccess")&&(poster=JSON.parse(localStorage.getItem("poster")),author=JSON.parse(localStorage.getItem("author")),keyword=JSON.parse(localStorage.getItem("keyword")),presen=JSON.parse(localStorage.getItem("presen")),presents=JSON.parse(localStorage.getItem("presents")),session=JSON.parse(localStorage.getItem("session")),commentator=JSON.parse(localStorage.getItem("commentator")),position=JSON.parse(localStorage.getItem("position")),taparea=JSON.parse(localStorage.getItem("taparea")),toppage_img=JSON.parse(localStorage.getItem("toppage_img")),posmapp_bg=JSON.parse(localStorage.getItem("posmapp_bg")),STATIC_WIDTH=parseInt(localStorage.getItem("STATIC_WIDTH")),STATIC_HEIGHT=parseInt(localStorage.getItem("STATIC_HEIGHT")),poster_days=posmapp_bg.length,timetable=JSON.parse(localStorage.getItem("timetable")),venuemap=JSON.parse(localStorage.getItem("venuemap")),basic_info=JSON.parse(localStorage.getItem("basic_info")),localStorage.setItem("voter_info",JSON.stringify(voter_info)),event_vote_app=basic_info.event_vote_app,event_vote_valid=basic_info.event_vote_valid,"0"===event_vote_valid?($("#permit_revoting").empty().append("投票後，投票内容を変更し再投票可能です．"),$("#complete_voting").append($('<input type="button" value="選択し直す" onclick="go_back()"/>'))):"1"===event_vote_valid&&($("#permit_revoting").empty().append("「投票する」を押すとQRコードが表示されます．<br>"),$("#permit_revoting").append("集計機にQRコードを読み込ませた後は<strong>再投票不可</strong>です．<br>投票しますか？"),$("#complete_voting").append($('<input type="button"  value="投票完了" onclick="go_toppage()"/>'))),makeSessionMap(),makeVoteApplication(),create_navbar()),STATIC_WIDTH=720,STATIC_HEIGHT=960,setMapSize()}function makeSessionMap(){for(var e in session)session_map[session[e].sessionid]=session[e]}function makeVoteApplication(){"0"===event_vote_app||"1"===event_vote_app&&$("#vote_app_page").remove()}function setMapSize(){MAP_AREA_WIDTH=screen.width,MAP_AREA_HEIGHT=screen.height-55-68-68,INIT_SCALE=MAP_AREA_WIDTH/STATIC_WIDTH,SCALE_BY="width",STATIC_HEIGHT*INIT_SCALE>MAP_AREA_HEIGHT&&(INIT_SCALE=MAP_AREA_HEIGHT/STATIC_HEIGHT,SCALE_BY="height")}function create_navbar(){"0"===event_vote_app?($(".on-navbar").show(),$(".off-navbar").hide()):"1"===event_vote_app&&($(".on-navbar").hide(),$(".off-navbar").show())}function init(){$("#topPageFrame").css("width",window.innerWidth).css("max-width",window.innerWidth),checkDataVersion(),downloadPoster(),initData(),$("#ReDownload").reDownload(),$("#CancelDownload").cancelDownload(),$(".reDownloadDIVCLS").reDownloadFun(),$(".ReDownloadBtn").reDownloadFun(),localStorage.getItem("downloadSuccess")&&($("#reDownloadDIV").hide(),$(".ReDownloadBtn").hide()),$("#eventBasicInfo").showBasicInfo(),setTopPageProperties(),initPosterMap(),setChangePosterMapDate(),changePosterMapDate(1),setPosterIcons(),initHammer(),$("#resetScaleButtonFrame").css("zoom",window.innerWidth/1200),showPosterIcons(),setLabelSize(),removeAllPosterInfo(),sessionStorage.removeItem("searching"),sessionStorage.removeItem("searchWord"),null===localStorage.getItem("bookmarks")&&localStorage.setItem("bookmarks",""),null!==sessionStorage.getItem("label")&&changeLabel(sessionStorage.getItem("label")),showBookmarkIcons(),$("#detailinfobutton").goToDetailPage("click"),$(".postericon").touchPoster(),$("#basicinfo").css("width",window.innerWidth-80).css("max-width",window.innerWidth-80).closeBasicInfo(),$(".changelabel").changeLabel(),$("#changelabel").css("zoom",window.innerWidth/1200),setDetails(),$("#goToMap").goToMapPage("click"),$("#goToList").goToListPage("click"),$("#goToVote").goToVotePage("click"),null!=timetable&&""!=timetable?$("#goToInformation").goToInformationPage("click"):$("#goToInformation").attr("src","../../img/topmenu/schedule_gray.png"),null!=venuemap&&""!=venuemap?($("#goToVenue").goToVenuePage("click"),$("#floormap").attr("src",venuemap)):$("#goToVenue").attr("src","../../img/topmenu/venue_gray.png"),null!=toppage_img&&$("#topPageBackground").attr("src",toppage_img),null!=posmapp_bg&&posmapp_bg.length>0,window.addEventListener("popstate",function(e){e.state&&changeActiveTab(e.state.hash)}),$("#timeTable").showTimeTable(),$("#presenList").showPresenList(),$("#bookmarkList").showBookmarkList(),$("#listIconAll").on("click",function(){changeShowList("presenlist")}),$("#listIconStar").on("click",function(){changeShowList("bookmark")}),$("#presenList").show(),$("#bookmarkList").hide(),$("#listIconAll").addClass("ui-btn-active"),$("#listIconStar").removeClass("ui-btn-active"),sessionStorage.setItem("currentListPage","#presenListPage"),$("#detailBackButton").backToPreviousPage(),$(".topPageButton").goToTopPage("click"),$(".posterMapPageButton").goToMapPage("click"),$(".presenListPageButton").goToListPage("click"),null!=venuemap&&""!=venuemap?$(".venuePageButton").goToVenuePage("click"):($(".venuePageButton").text("(No Map)"),$(".venuePageButton").css("color","#999999"),$(".venuePageButton").addClass("ui-disabled")),null!=timetable&&""!=timetable?$(".informationPageButton").goToInformationPage("click"):($(".informationPageButton").text("(No Data)"),$(".informationPageButton").css("color","#999999"),$(".informationPageButton").addClass("ui-disabled")),voter_param?$(".votePageButton").goToVotePage("click"):($(".votePageButton").text("(Re-load your QR)"),$(".votePageButton").css("color","#999999"),$(".votePageButton").addClass("ui-disabled")),$(".jumpToPresen").jumpToPresen();for(var e in timetable){var t=Number(e)+1;$("#changeDate0"+t).changeDate("sessiontable"+t)}$("#changeDate01").trigger("click"),$(".bookmarkstar").sizeUpBookmarkStar(),$(".jumpToVenue").jumpToVenue(),changeActiveTab(window.location.hash),console.log("process2"),create_list()}function initUserData(){if(null===localStorage.getItem("uid")){var e=createUID();localStorage.setItem("uid",e)}if(null===localStorage.getItem("accept_collect_log")){var t=1;localStorage.setItem("category",t),window.location.href="#checkCollectLogDialog"}}function createUID(){var e=new Date,t=md5(e.getTime().toString());return t}function saveLog(e,t){if(Boolean.valueOf(localStorage.getItem("accept_collect_log"))){var o=new Date,a=localStorage.getItem("uid"),s=localStorage.getItem("category"),n={};n.uid=a,n.category=s,n.action=e,n.attribute=t,n.timestamp=o.getTime(),null!==a&&localStorage.setItem(a+"_"+o.getTime(),JSON.stringify(n));var r=o.getTime().toString()-localStorage.getItem("log_last_sent"),i=3e5;console.log("time delta(sec): "+r/1e3),r>i&&console.log("send log")}}function sendLog(){var e=loadLog(),t=new Date;$.ajax({url:webroot+"php/savelog.php",type:"POST",dataType:"json",data:e,timeout:1e4,success:function(e){console.log("send success"),deleteLog()},error:function(e,t,o){console.error("send error"),console.error("XMLHttpRequest: "+e),console.error("textStatus: "+t),console.error("errorThrown: "+o)},complete:function(e){console.log("send complete"),localStorage.setItem("log_last_sent",t.getTime().toString())}})}function loadLog(){var e={},t=[],o=localStorage.getItem("uid");e.uid=o;for(var a=0;a<localStorage.length;a++){var s=localStorage.key(a);s.indexOf(o)!==-1&&t.push(JSON.parse(localStorage.getItem(s)))}return e.logdata=t,console.log(JSON.stringify(e)),e}function deleteLog(){for(var e=localStorage.getItem("uid"),t=[],o=0;o<localStorage.length;o++){var a=localStorage.key(o);a.indexOf(e)!==-1&&t.push(a)}t.forEach(function(e){localStorage.removeItem(e)})}function resetDelta(){var e=new Date;localStorage.setItem("log_last_sent",e.getTime().toString())}function downloadPoster(e){$(".downloading").css("display","inline"),e||(e="#topPage"),"true"!==localStorage.getItem("downloadSuccess")||isValidLocalStorage()||(console.log("Invalid Local Storage, Redownload"),localStorage.removeItem("downloadSuccess")),sessionStorage.getItem("clickDiv")?setTimeout("ajaxdownload('"+e+"')",500):ajaxdownload(e)}function checkDataVersion(){$.ajax({url:posMAppDataVersionURL,type:"GET",dataType:"json",async:!1,data:"",timeout:1e4,success:function(e){version=e.version;var t=localStorage.getItem("version");(null==t||version>t)&&(localStorage.setItem("version",version),localStorage.setItem("downloadSuccess",!1))}})}function ajaxdownload(e){var t=localStorage.getItem("downloadSuccess");"false"!==t&&null!==t||(localStorage.clear(),$.ajax({url:posMAppDataURL,type:"GET",dataType:"json",async:!1,data:"",timeout:1e4,success:function(e){console.log("Download Success"),basic_info=e.basic_info,poster=e.poster,author=e.author,keyword=e.keyword,presen=e.presen,presents=e.presents,session=e.session,timetable=e.timetable,commentator=e.commentator,position=e.position,taparea=e.taparea,venuemap=e.venuemap,toppage_img=e.toppage_img,posmapp_bg=e.posmapp_bg,STATIC_WIDTH=e.STATIC_WIDTH,STATIC_HEIGHT=e.STATIC_HEIGHT,null!=basic_info&&localStorage.setItem("basic_info",JSON.stringify(e.basic_info)),localStorage.setItem("poster",JSON.stringify(e.poster)),localStorage.setItem("author",JSON.stringify(e.author)),null!=keyword&&localStorage.setItem("keyword",JSON.stringify(e.keyword)),localStorage.setItem("presen",JSON.stringify(e.presen)),null!=presents&&localStorage.setItem("presents",JSON.stringify(e.presents)),null!=session&&localStorage.setItem("session",JSON.stringify(e.session)),localStorage.setItem("timetable",JSON.stringify(e.timetable)),null!=commentator&&localStorage.setItem("commentator",JSON.stringify(e.commentator)),localStorage.setItem("position",JSON.stringify(e.position)),null!=taparea&&localStorage.setItem("taparea",JSON.stringify(e.taparea)),null!=toppage_img&&localStorage.setItem("toppage_img",JSON.stringify(e.toppage_img)),null!=posmapp_bg&&localStorage.setItem("posmapp_bg",JSON.stringify(e.posmapp_bg)),localStorage.setItem("venuemap",JSON.stringify(e.venuemap)),localStorage.setItem("STATIC_WIDTH",JSON.stringify(e.STATIC_WIDTH)),localStorage.setItem("STATIC_HEIGHT",JSON.stringify(e.STATIC_HEIGHT)),setMapSize(),localStorage.setItem("downloadSuccess","true"),$("#reDownloadDIV").css("display","none"),$("#reDownloadDIVList").css("display","none"),$("#reDownloadDIVMap").css("display","none"),localStorage.removeItem("downloadResult"),$("#posters").show()},error:function(t,o,a){console.error("Download Error:  "+a),localStorage.setItem("pageName",e),localStorage.setItem("downloadResult","downloadResult"),setTimeout("$('.reDownloadDIVCLS').html('データを再ダウンロード')",3e3),setTimeout("$('.ReDownloadBtn').html('データを再ダウンロード')",3e3),window.location.href=e,window.location.href="#downloadFailDialog",$("#posters").hide()},complete:function(e){console.log("Download Complete"),sessionStorage.removeItem("clickDiv")}}))}function isValidLocalStorage(){return null!==localStorage.getItem("poster")&&(null!==localStorage.getItem("author")&&(null!==localStorage.getItem("presen")&&(null!==localStorage.getItem("position")&&(null!==localStorage.getItem("STATIC_WIDTH")&&(null!==localStorage.getItem("STATIC_HEIGHT")&&null!==localStorage.getItem("version"))))))}function initHammer(){if(mc=new Hammer.Manager($("#mapFrame")[0]),$("#resetScaleButtonFrame").hide(),null!=taparea){$("#resetScaleButton").on("click",resetZoom),$(".posterfont").hide();var e=$("#posterArea");e.empty(),taparea.forEach(function(t){var o=t.date,a=$("<div>").attr("id","area"+t.id+" areaDay"+o).addClass("mapArea").css("position","absolute").css("z-index",70).css("opacity",.4).css("background-color",t.color).css("left",t.x*INIT_SCALE).css("top",t.y*INIT_SCALE).css("width",t.width*INIT_SCALE).css("height",t.height*INIT_SCALE).on("click",function(){zoomMap(t)});e.append(a)})}else $(".posterfont").show();hammerOnMap()}function zoomMap(e){var t=$("#mapMain"),o=t[0];o.className="animate";var a="longways"===e.direction?MAP_AREA_HEIGHT/e.height/INIT_SCALE:MAP_AREA_WIDTH/e.width/INIT_SCALE,s=e.x*INIT_SCALE*-a,n=e.y*INIT_SCALE*-a;transform={translate:{x:s,y:n},scale:a};var r=["translate("+transform.translate.x+"px, "+transform.translate.y+"px)","scale("+transform.scale+", "+transform.scale+")"];r=r.join(" "),o.style.webkitTransform=r,o.style.mozTransform=r,o.style.transform=r,posx=transform.translate.x,posy=transform.translate.y,scale=transform.scale,resx=posx,resy=posy,resscale=scale,$(".mapArea").hide(),$("#resetScaleButtonFrame").show(),$(".posterfont").show(),$(".bookmarkstar").sizeDownBookmarkStar(),$("#prevDayButton").hide(),$("#nextDayButton").hide()}function resetZoom(){var e=$("#mapMain")[0];e.className="animate",transform={translate:{x:0,y:0},scale:1};var t=["translate("+transform.translate.x+"px, "+transform.translate.y+"px)","scale("+transform.scale+", "+transform.scale+")"];t=t.join(" "),e.style.webkitTransform=t,e.style.mozTransform=t,e.style.transform=t,posx=transform.translate.x,posy=transform.translate.y,scale=transform.scale,resx=posx,resy=posy,resscale=scale,changePosterMapDate(Number(sessionStorage.getItem("currentPosterMapDate"))),null!==sessionStorage.getItem("label")&&changeLabel(sessionStorage.getItem("label")),$(".mapArea").show();for(var o=1;o<=poster_days;o++)$findID="areaDay"+o,o==Number(1)?$("[id$="+$findID+"]").show():$("[id$="+$findID+"]").hide();$("#resetScaleButtonFrame").hide(),null!=taparea&&$(".posterfont").hide(),$(".bookmarkstar").sizeUpBookmarkStar()}function hammerOnMap(){function e(){posx=resx,posy=resy,scale=resscale,transform={translate:{x:resx,y:resy},scale:resscale}}function t(){if(isAnimated){transform.scale=transform.scale>=10?10:transform.scale,transform.scale=transform.scale<=.2?.2:transform.scale;var e=["translate("+transform.translate.x+"px, "+transform.translate.y+"px)","scale("+transform.scale+", "+transform.scale+")"];e=e.join(" "),a.style.webkitTransform=e,a.style.mozTransform=e,a.style.transform=e,setTimeout(t,o)}}var o=100;$("#mapMain");"height"===SCALE_BY?$("#mapImg").css("height",MAP_AREA_HEIGHT):$("#mapImg").css("width",MAP_AREA_WIDTH);var a=$("#mapMain")[0];a.className="animate";isAnimated=!1,e(),mc.add(new Hammer.Pan),mc.add(new Hammer.Tap({event:"doubletap",taps:2})),mc.on("panstart",function(e){isAnimated=!0,transform={translate:{x:posx,y:posy},scale:scale},t()}),mc.on("panmove",function(e){transform.translate={x:posx+e.deltaX,y:posy+e.deltaY}}),mc.on("panend pancancel",function(){isAnimated=!1,posx=transform.translate.x,posy=transform.translate.y}),mc.on("pinchstart",function(e){isAnimated=!0;var o=((-posx+e.center.x)/MAP_AREA_WIDTH).toString()+"%",a=((-posy+e.center.y)/MAP_AREA_HEIGHT).toString()+"%";$("#mapMain").css("-moz-transform-origin",o+" "+a).css("-webkit-transform-origin",o+" "+a),transform={translate:{x:posx,y:posy},scale:scale},t()}),mc.on("pinchmove",function(e){transform.scale=scale*e.scale}),mc.on("pinchend pinchcancel",function(e){isAnimated=!1,$("#mapMain").css("-moz-transform-origin","left top").css("-webkit-transform-origin","left top"),scale=transform.scale}),mc.on("doubletap",function(){e(),isAnimated=!0,t(),isAnimated=!1})}function closePanel(e){e.panel("close")}function effectPosterIcon(e){$icon=$("#icon"+e),$("#icon"+e).hide("puff"),$("#icon"+e).show("puff")}function initPosterMap(){if(null!==poster){var e=poster.length;pflag=new Array(e+1),pflag[0]=null;for(var t=1;t<=e;t++)pflag[t]="d"}}function setPosterIcons(){if(null!==poster&&null!=position){var e,t,o,a,s=[null,"top:-5px;","right:-5px;","bottom:-5px;","left:-5px;"],n=[null,"Top","Right","Bottom","Left"],r="";ptotal=poster.length;for(var i=1;i<=ptotal;i++){e=s[poster[i-1].star],t=n[poster[i-1].star];var l=poster[i-1].presenid,c=/[\u4E00-\u9FA5]/g,l=l.replace(c,""),g=poster[i-1].date,p="day"+g,m=position.filter(function(e,t){if(e.id==poster[i-1].posterid)return!0})[0];o=m.width*INIT_SCALE,a=m.height*INIT_SCALE,posterIconNo[poster[i-1].posterid]=i,r+="<div class='postericonframe "+p+"' id='iconNo"+i+"' style='left:"+m.x*INIT_SCALE+"px;top:"+m.y*INIT_SCALE+"px;width:"+o+"px;height:"+a+"px;'>\t\t\t\t\t<div class='postericon' style='width:"+o+"px;height:"+a+"px;'>\t\t\t\t\t\t<div class='dpic' id='icon"+i+"' style='width:"+o+"px;height:"+a+"px; display: table-cell; vertical-align: middle; text-align: center;'>\t\t\t\t\t\t\t<div class='posterfont' id='font"+i+"'>"+l+"</div>\t\t\t\t\t\t</div>\t\t\t\t\t</div>\t\t\t\t\t<img id='star"+t+"No"+i+"' class='star bookmarkstar' style='"+e+" display:none;' src='"+webroot+"img/bookmark.png'></img>\t\t\t\t</div>\n"}}document.getElementById("posters").innerHTML=r;for(var d=sessionStorage.getItem("currentPosterMapDate"),i=1;i<=poster_days;i++)i==Number(d)?$(".day"+d).show():$(".day"+i).hide();showBookmarkStars()}function showBookmarkStars(){for(var e=poster.length,t=1;t<=e;t++){var o=[null,"Top","Right","Bottom","Left"],a=o[poster[t-1].star],s=document.getElementById("star"+a+"No"+t),n=getBookmarks(),r=n.indexOf(poster[t-1].presenid);r!==-1?s.style.display="block":s.style.display="none"}}function changeLabel(e){if(null!==presen){sessionStorage.setItem("label",e);for(var t=new Array(ptotal),o=1;o<=ptotal;o++){var a;if("authorname"===e)a=getAuthorname(poster[o-1].presenid);else if("authoraffiliation"===e)a=getAuthoraffiliation(poster[o-1].presenid);else{var s;presen.forEach(function(e){e.presenid===poster[o-1].presenid&&(s=e)}),a=s[e].toString()}a.length>labelmax&&(a=a.substring(0,labelmax)+"..."),setLabel(o,a)}return t}}function setLabel(e,t){document.getElementById("font"+e).innerHTML=t}function setLabelSize(){var e=$("#emScale").height(),t=5;if(null!=poster&&null!=position){ptotal=poster.length;for(var o=1;o<=ptotal;o++){var a=(poster[o-1].presenid,poster[o-1].date,position.filter(function(e,t){if(e.id==poster[o-1].posterid)return!0})[0]);if(iconWidth=a.width*INIT_SCALE,iconHeight=a.height*INIT_SCALE,iconDirection=a.direction,"longways"===iconDirection){var s=iconHeight/(t*e),n="90deg";$("#font"+o).css("transform-origin","top left").css("transform","rotateZ("+n+") scale("+s+")").css("left","calc(70%)").css("top","calc("+(100/t-10)+"%)")}else{var s=iconWidth/(t*e);$("#font"+o).css("transform-origin","top left").css("transform","scale("+s+")").css("top","calc("+100/t+"%)").css("left","calc("+(100/t-10)+"%)")}}}}function showPosterIcons(){var e;for(key in pflag){switch(pflag[key]){case"d":e="dpic";break;case"t":e="tpic";break;case"s":e="spic";break;case"e":e="epic"}null!=key&&0!=key&&(document.getElementById("icon"+key).className=e)}}function touchPoster(e){if(e<0)throw new Exception;if("true"===sessionStorage.getItem("searching")){if("d"===pflag[e])return unselectPoster(),selectPoster(e),"t";if("t"===pflag[e])return changeBasicInfoPanel(!1),unselectPoster(),"d";if("s"===pflag[e])return unselectPoster(),selectPoster(e),"e";if("e"===pflag[e])return changeBasicInfoPanel(!1),unselectPoster(),"s"}else{if("d"===pflag[e])return unselectPoster(),selectPoster(e),"t";if("t"===pflag[e])return changeBasicInfoPanel(!1),unselectPoster(),"d"}}function changeBasicInfoPanel(e){var t=document.getElementById("basicinfopanel");e?t.style.display="inline":(t.style.display="none",removeAllPosterInfo());var o=document.getElementById("basicinfo");o.innerHTML=" ["+sessionStorage.getItem("presenid")+"]<br /><div id='basicInfoTitleContainer'><span id='basicInfoTitle'>"+sessionStorage.getItem("title")+"</span></div>";var a=sessionStorage.getItem("authorname");void 0!=a&&(o.innerHTML+=a);var s=document.getElementById("bookmarkbutton"),n=localStorage.getItem("bookmarks");null!==n&&""!==n||(n="");var r=n.split(","),i=sessionStorage.getItem("presenid");r.indexOf(i)!==-1?s.src=webroot+"img/bookmark.png":s.src=webroot+"img/unbookmark.png"}function emphasisSearchedPosters(e){for(i in pflag)"t"!==pflag[i]&&"e"!==pflag[i]&&(pflag[i]="d"),"e"===pflag[i]&&(pflag[i]="t");e.forEach(function(e){var t=posterIconNo[e];"t"===pflag[t]?pflag[t]="e":"e"!==pflag[t]&&(pflag[t]="s")}),showPosterIcons()}function selectPoster(e){for(var t=poster[e-1].presenid,o=presen.length,a=0;a<o;a++){var s=presen[a];if(s.presenid===t){sessionStorage.setItem("posterid",e),sessionStorage.setItem("presenid",s.presenid),sessionStorage.setItem("title",s.title),void 0!=s.abstract?sessionStorage.setItem("abstract",s.abstract):sessionStorage.setItem("abstract","(No Abstract)"),sessionStorage.setItem("authorname",getAuthorname(s.presenid)),sessionStorage.setItem("authoraffiliation",getAuthoraffiliation(s.presenid)),sessionStorage.setItem("bookmark",s.bookmark),sessionStorage.setItem("star",poster[e-1].star),sessionStorage.setItem("authors",getAuthors(t)),sessionStorage.setItem("keywords",getKeywords(t));break}}changeBasicInfoPanel(!0)}function unselectPoster(){for(var e=1;e<=ptotal;e++)"t"===pflag[e]?pflag[e]="d":"e"===pflag[e]&&(pflag[e]="s")}function resetAllIcons(){for(var e=1;e<=ptotal;e++)pflag[e]="d";showPosterIcons()}function removeAllPosterInfo(){sessionStorage.removeItem("posterid"),sessionStorage.removeItem("presenid"),sessionStorage.removeItem("title"),sessionStorage.removeItem("abstract"),sessionStorage.removeItem("authorname"),sessionStorage.removeItem("authoraffiliation"),sessionStorage.removeItem("bookmark"),sessionStorage.removeItem("star"),sessionStorage.removeItem("authors"),sessionStorage.removeItem("keywords")}function showBookmarkIcons(){for(var e=getBookmarks(),t=0;t<e.length;t++){var o=e[t];if(void 0!==o&&null!==o){var a=getPosterid(o);if(a!==-1){var s=poster[a-1],n=[null,"Top","Right","Bottom","Left"];starelem=document.getElementById("star"+n[s.star]+"No"+a),starelem.style.display="block"}}}}function touchBookmarkFun(e,t){var o=getBookmarks(),a=o.indexOf(e);console.log(e);var s;a!==-1?(o.splice(a,1),null!==t&&(t.src=webroot+"img/unbookmark.png",$("#listbookmark"+e).attr("src",webroot+"img/unbookmark.png")),s="none",saveLog("unbookmark",{presenid:e,page:window.location.hash})):(o.push(e),o.sort(),null!==t&&(t.src=webroot+"img/bookmark.png",$("#listbookmark"+e).attr("src",webroot+"img/bookmark.png")),s="block",saveLog("bookmark",{presenid:e,page:window.location.hash}));var n=[null,"Top","Right","Bottom","Left"];if(null!==t){for(var r,i=getPosterid(e),l=0;l<poster.length;l++)poster[l].posterid==i,r=poster[l],i=l;starelem=document.getElementById("star"+n[r.star]+"No"+i),starelem.style.display=s}return bookmarks=o.join(","),localStorage.setItem("bookmarks",bookmarks),$("#bookmarkList").showBookmarkList(),bookmarks}function getBookmarks(){var e=localStorage.getItem("bookmarks"),t=""!==e&&null!==e?e.split(","):[];return t.sort(),t}function searchChanged(e){if(""!==e.value.trim()&&null!==e.value)console.log("search"),saveLog("search",{keyword:e.value}),searchAll(e.value),sessionStorage.setItem("searching","true"),sessionStorage.setItem("searchWord",e.value);else{sessionStorage.removeItem("searching"),sessionStorage.removeItem("searchWord");for(i in pflag)"e"===pflag[i]?pflag[i]="t":"s"===pflag[i]&&(pflag[i]="d");document.getElementById("searchResult").innerHTML=""}showPosterIcons(),e.blur()}function searchAll(e){if(e.length>=1024)throw new Exception;var t=[],o=e.toLowerCase();return presen.forEach(function(e){e.presenid.toLowerCase().indexOf(o)===-1&&e.title.toLowerCase().indexOf(o)===-1&&e.abstract.toLowerCase().indexOf(o)===-1||t.push(getPosterid(e.presenid))}),author.forEach(function(e){e.name.toLowerCase().indexOf(o)===-1&&e.affiliation.toLowerCase().indexOf(o)===-1||t.push(getPosterid(e.presenid))}),null!=keyword&&keyword.forEach(function(e){e.keyword.toLowerCase().indexOf(o)!==-1&&t.push(getPosterid(e.presenid))}),t=t.filter(function(e,t,o){return e!=-1}).filter(function(e,t,o){return o.indexOf(e)===t}),t.sort(),console.log("HIT : "+t),t.forEach(function(e){effectPosterIcon(e)}),emphasisSearchedPosters(t),document.getElementById("searchResult").innerHTML='<span id="searchResultText" class="ui-li-count" style="right:initial">'+t.length+"件</span>",pflag}function setDetails(){$("#detail-posterid").html(sessionStorage.getItem("posterid")),$("#detail-presenid").html(sessionStorage.getItem("presenid")),$("#detail-title").html(sessionStorage.getItem("title"));var e=sessionStorage.getItem("authors");if(e=null!==e&&""!==e?e:"NO DATA",$("#detail-authors").html(e),$("#detail-authoraffiliation").html(sessionStorage.getItem("authoraffiliation")),$("#detail-authorname").html(sessionStorage.getItem("authorname")),null!=keyword){var t=sessionStorage.getItem("keywords");t=null!==t&&""!==t?t:"NO DATA",$("#detail-keywords").html(t)}$("#detail-abstract").html(sessionStorage.getItem("abstract"))}function setChangePosterMapDate(){$("#prevDayButton").on("click",function(e){var t=sessionStorage.getItem("currentPosterMapDate");if(null!=t){var o=Number(t);o>1&&changePosterMapDate(o-1)}}),$("#nextDayButton").on("click",function(e){var t=sessionStorage.getItem("currentPosterMapDate");if(null!=t){var o=Number(t);o<poster_days&&changePosterMapDate(o+1)}})}function changePosterMapDate(e){null!=posmapp_bg&&$("#mapImg").attr("src",posmapp_bg[e-1]),sessionStorage.setItem("currentPosterMapDate",e),e<poster_days?$("#nextDayButton").show():$("#nextDayButton").hide(),e>1?$("#prevDayButton").show():$("#prevDayButton").hide(),setPosterIcons(),showPosterIcons(),setLabelSize(),null!==sessionStorage.getItem("label")&&changeLabel(sessionStorage.getItem("label")),$(".postericon").touchPoster(),$("#resetScaleButtonFrame").hide(),null!=taparea&&($(".mapArea").show(),$(".posterfont").hide()),$(".bookmarkstar").sizeUpBookmarkStar();for(var t=1;t<=poster_days;t++)$findID="areaDay"+t,t==Number(e)?$("[id$="+$findID+"]").show():$("[id$="+$findID+"]").hide()}function getAuthorname(e){return author.filter(function(t){var o=t.presenid==e&&1==t.first;return o}).map(function(e){var t=e.name;return void 0!=e.affiliation&&(t+=" ("+e.affiliation+")"),t})[0]}function getAuthoraffiliation(e){return author.filter(function(t){return t.presenid===e}).map(function(e){return e.affiliation}).filter(function(e,t,o){return o.indexOf(e)===t}).join(", ")}function getAuthors(e){return author.filter(function(t){return t.presenid===e}).map(function(e){var t=e.name;return void 0!=e.affiliation&&(t+=" ("+e.affiliation+")"),t}).join(", ")}function getKeywords(e){return null==keyword?"":keyword.filter(function(t){var o=t.presenid==e;return o}).map(function(e){return e.keyword}).join(", ")}function getPosterid(e){for(var t=-1,o=poster.length,a=0;a<o;a++)if(poster[a].presenid===e){t=poster[a].posterid;break}return t}function listToDetail(e){if(null===e||void 0===e)throw new Exception;removeAllPosterInfo(),presen.forEach(function(t){t.presenid===e&&(sessionStorage.setItem("posterid",getPosterid(e)),sessionStorage.setItem("presenid",e),sessionStorage.setItem("title",t.title),sessionStorage.setItem("abstract",t.abstract),sessionStorage.setItem("authorname",getAuthorname(e)),sessionStorage.setItem("authors",getAuthors(e)),sessionStorage.setItem("keywords",getKeywords(e)),sessionStorage.setItem("authoraffiliation",getAuthoraffiliation(e)))}),setDetails(),changePage("#detailPage")}function listToMap(e){if(e<1||null===e||void 0===e)throw new Exception;removeAllPosterInfo(),effectPosterIcon(e),changePage("#posterMapPage");for(var t=poster.length,o=0,a=0;a<t;a++)if(poster[a].posterid==e){changePosterMapDate(poster[a].date),o=a;break}resetAllIcons();var s=touchPoster(o+1);pflag[o+1]=s,showPosterIcons();var n=sessionStorage.getItem("searchWord");""!==n&&null!==n&&searchAll(sessionStorage.getItem("searchWord"))}function scrollToPresen(e){changePage("#presenListPage"),changeShowList("presen");var t=$("#presen"+e),o=t.offset().top,a=400;$("body,html").animate({scrollTop:o},a,"swing")}function changeShowList(e){if("presenlist"==e){$("#presenList").show(),$("#bookmarkList").hide(),$("#listIconAll").addClass("ui-btn-active"),$("#listIconStar").removeClass("ui-btn-active");var t="#presenListPage"}else{$("#presenList").hide(),$("#bookmarkList").show(),$("#listIconAll").removeClass("ui-btn-active"),$("#listIconStar").addClass("ui-btn-active");var t="#bookmarkListPage"}sessionStorage.setItem("currentListPage",t),saveLog("show_page",{page:t})}function scrollToTr(){if(!localStorage.getItem("downloadResult")){var e=$("#session"+sessionStorage.getItem("gotosessionid"));if(console.log(sessionStorage.getItem("gotosessionid")),e.offset()){var t=e.offset().top-45;$("body,html").scrollTop(t)}$(document).off("pageshow"),sessionStorage.removeItem("gotosessionid")}}function changePage(e){if("#presenListPage"===e){var t=sessionStorage.getItem("currentListPage");saveLog("show_page",{page:t})}else saveLog("show_page",{page:e});return resetZoom(),changeActiveTab(e),window.location.hash=e,e}function changeActiveTab(e){$(".topPageButton").removeClass("ui-btn-active ui-state-persist"),$(".presenListPageButton").removeClass("ui-btn-active ui-state-persist"),$(".venuePageButton").removeClass("ui-btn-active ui-state-persist"),$(".posterMapPageButton").removeClass("ui-btn-active ui-state-persist"),$(".informationPageButton").removeClass("ui-btn-active ui-state-persist"),$(".votePageButton").removeClass("ui-btn-active ui-state-persist"),$("."+e.substring(1)+"Button").addClass("ui-btn-active ui-state-persist")}function setTopPageProperties(){var e=window.parent.screen.width;e<=640?($("#topPageEventName").css("font-size","20px"),$("#topPageEventDescription").css("font-size","10px")):($("#topPageEventName").css("font-size","40px"),$("#topPageEventDescription").css("font-size","20px"))}$.fn.showBookmarkList=function(){var e=[];e.posterid=[],e.presenid=[],e.title=[],e.author=[];var t=localStorage.getItem("bookmarks");null!==t&&""!==t||(t="");var o="";if(""===t)o+="<div id='emptyBookmarklist'>ブックマークされていません。</div>";else{var a=t.split(",");o+='<table border="1" rules="rows" width="100%">';for(var s=a.length,n=presen.length,r=0;r<=s;r++)for(var i=0;i<n;i++){var l=presen[i];if(a[r]===l.presenid){var c=getPosterid(l.presenid);authorname=getAuthorname(l.presenid),e.posterid.push(c!==-1?c:null),e.presenid.push(l.presenid),e.title.push(l.title),e.author.push(getAuthors(l.presenid)),o+="<tr id='bookmarkedpresen"+l.presenid+"'><td><div> \t"+l.presenid,c!==-1&&(o+="<img class='bookmarklistToMapBtn' id='bookmarklistToMap"+c+"' src='"+webroot+"img/logo_posmapp.png' style='zoom: 8%;'></img>"),o+="&nbsp;&nbsp;<img class='bookmarklistbookmarkbutton' id='bookmarklistbookmark"+l.presenid+"' src='"+webroot+"img/bookmark.png' style='zoom: 22%;'></img><br>",o+="<span class='bookmarklistTitle'><strong><small>"+l.title+"</small></strong></span><br>",o+="<div class='authors-on-list'><span class='bookmarklistAuthors'>"+authorname+", 他</span></div></td>",o+="<td><div><td><img class='bookmarklistToDetailBtn' id='bookmarklistToDetail"+l.presenid+"' src='"+webroot+"img/detailinfo.png' style='zoom: 3%;'> </img></div>"}}o+="</table>"}return $(this).html(o),$(".bookmarklistToMapBtn").bookmarklistToMapPage(),$(".bookmarklistToDetailBtn").bookmarklistToDetailPage(),$(".bookmarklistbookmarkbutton").deletebookmark(),$(".bookmarklistTitle").bookmarkjumpToDetailPage(),$(".bookmarklistAuthors").bookmarkjumpToDetailPage(),e},$.fn.bookmarkjumpToDetailPage=function(){$(this).on("click",function(e){var t=$(e.target).parents().filter(function(){return"TR"===this.tagName}).get(0).id.substring("bookmarkedpresen".length);sessionStorage.setItem("previousPage","presenListPage"),sessionStorage.setItem("listClick","bookmarklist"),listToDetail(t)})},$.fn.bookmarklistToDetailPage=function(){$(this).on("click",function(e){var t=e.target.id.substring(20);sessionStorage.setItem("previousPage","presenListPage"),sessionStorage.setItem("listClick","bookmarklist"),listToDetail(t)})},$.fn.bookmarklistToMapPage=function(){$(this).on("click",function(e){var t=Number(e.target.id.substring(17));listToMap(t)})},$.fn.deletebookmark=function(){$(this).on("click",function(e){
var t=confirm("ブックマークを削除してよろしいですか？");if(t===!0){var o=e.target.id.substring(20);console.log(o);document.getElementById("bookmarkbutton");removebookmark(o);var a=document.getElementById("bookmarkedpresen"+o),s=document.getElementById("bookmarkList");if(a.parentNode.removeChild(a),0===getBookmarks().length){var n="<div id='emptyBookmarklist'>ブックマークされていません。</div>";s.innerHTML=n}}})};var poster=[],basic_info=null,author=null,keyword=null,presen=null,presents=null,session=null,session_map={},timetable=null,commentator=[],position=null,taparea=null,venuemap=null,toppage_img=null,posmapp_bg=[],poster_days=null,STATIC_WIDTH=null,STATIC_HEIGHT=null,MAP_AREA_WIDTH=null,MAP_AREA_HEIGHT=null,INIT_SCALE=null,SCALE_BY=null,CandidateID={},voter_info=null,url=window.location.href,voter_param=window.location.search.substring(1),event_str_all=url.substring(url.lastIndexOf("/")+1,url.length),event_vote_app=null,event_vote_valid=null,already_voted=null,voter_param_flag=1,voteDay,voteDay2;if(voter_param){voter_param_flag=0,event_str=event_str_all.split("?")[0];var get_voter_id=voter_param.split("&")[0];get_voter_id=get_voter_id.split("=")[1],voter_info={voter_id:get_voter_id}}else event_str=event_str_all.split("#")[0];var posMAppDataURL="../../json/"+event_str+".json",posMAppDataVersionURL="../../json/"+event_str+"_version.json";$.fn.backToPreviousPage=function(){$(this).on("click",function(e){var t=sessionStorage.getItem("previousPage");null!==t&&void 0!==t||(t="posterMapPage"),changeShowList(sessionStorage.getItem("listClick")),changePage("#"+t)})},$(window).load(function(){console.log("process1"),setTimeout(function(){init(),$("#bookmarkbutton").touchBookmark()},0),$("#loading").hide()}),$.fn.acceptCollectLog=function(){$(this).on("click",function(e){console.log("collect log accept");var t=new Date;localStorage.setItem("log_last_sent",t.getTime().toString()),localStorage.setItem("accept_collect_log",!0),window.location.href="#selectUserCategoryDialog"})},$.fn.denyCollectLog=function(){$(this).on("click",function(e){console.log("collect log deny"),localStorage.setItem("accept_collect_log",!1),localStorage.getItem("downloadResult")?window.location.href="#downloadFailDialog":window.location.href="#topPage"})},$.fn.selectUserCategory=function(){$(this).on("click",function(e){var t=e.target.id,o=t.substring(t.indexOf("-")+1);localStorage.setItem("category",o),localStorage.getItem("downloadResult")?window.location.href="#downloadFailDialog":window.location.href="#topPage"})},$.fn.cancelDownload=function(){$(this).on("click",function(e){window.location.href=localStorage.getItem("pageName"),setTimeout("$('.reDownloadDIVCLS').html('データを再ダウンロード')",3e3),setTimeout("$('.ReDownloadBtn').html('データを再ダウンロード')",3e3),$("#posters").html("")})},$.fn.reDownload=function(){$(this).on("click",function(e){$(".downloading").css("display","inline"),$(".reDownloadDIVCLS").html("<img src='img/loading.gif' style='height:1.0em;vertical-align: middle;'>データ読み込み中"),$(".ReDownloadBtn").html("<img src='img/loading.gif' style='height:100%;vertical-align: middle;'>データ読み込み中"),downloadPoster(localStorage.getItem("pageName")),$("#posters").html("")})},$.fn.reDownloadFun=function(){$(this).on("click",function(e){var t="#"+window.location.href.split("#")[1];$(".reDownloadDIVCLS").html("<img src='img/loading.gif' style='height:1.0em;vertical-align: middle;'>データ読み込み中"),$(".ReDownloadBtn").html("<img src='img/loading.gif' style='height:100%;vertical-align: middle;'>データ読み込み中"),sessionStorage.setItem("clickDiv","clickDiv"),downloadPoster(t)})};var mc=null,transform=null,posx=0,posy=0,scale=1,resx=0,resy=0,resscale=1,isAnimated=!1,pflag,posterIconNo={},labelmax=7,ptotal,author=JSON.parse(localStorage.getItem("author"));$.fn.goToDetailPage=function(e){$(this).on(e,function(e){sessionStorage.setItem("previousPage","posterMapPage"),setDetails(),changePage("#detailPage")})},$.fn.touchPoster=function(){$(this).on("click",function(e){var t=Number(e.target.id.substring(4));saveLog("poster_tap",{posterid:t});var o=touchPoster(t);pflag[t]=o,showPosterIcons()})},$.fn.closeBasicInfo=function(){$(this).on("click",function(e){changeBasicInfoPanel(!1),saveLog("basicinfo_tap",{posterid:sessionStorage.getItem("posterid")}),unselectPoster(),showPosterIcons()})},$.fn.changeLabel=function(){$(this).on("click",function(e){var t=$(this).attr("id"),o=t.substr(t.indexOf("-")+1);saveLog("change_label",{label:o}),changeLabel(o),closePanel($("#menuPanel"))})},$.fn.touchBookmark=function(){$(this).on("click",function(e){var t=sessionStorage.getItem("presenid"),o=document.getElementById("bookmarkbutton");touchBookmarkFun(t,o),$("#bookmark-"+t).toggle()})},$.fn.sizeUpBookmarkStar=function(){$(this).css("width",15),$(this).css("height",15)},$.fn.sizeDownBookmarkStar=function(){$(this).css("width",5),$(this).css("height",5)},$.fn.showPresenList=function(){if(null!==presen){var e=[];e.posterid=[],e.presenid=[],e.title=[],e.author=[];var t=[],o=(document.getElementById("bookmarkbutton"),getBookmarks()),a="";if(a+='<table border="1" rules="rows" width="100%">',null!=session&&session.length>0)for(var s=0;s<session.length;s++){var n=session[s].sessionid;if(a+="<tr id='session"+n+"'><th class='sessionTH' colspan='3'><font class='sessionTitle'>"+n+":<strong>",a+=session[s].title+"</strong></font><br>",a+="<font class='sessionPerson'>座長:"+session[s].chairpersonname+"("+session[s].chairpersonaffiliation+")</font><br>",null!=commentator){a+="<font class='sessionPerson'>コメンテータ:";for(var r=0;r<commentator.length;r++)commentator[r].sessionid===n&&(a+=commentator[r].name+"("+commentator[r].affiliation+") ");a+="</font></th></tr>"}presen.forEach(function(t){if(t.presenid.indexOf(n)>=0){var s=getPosterid(t.presenid);authors=getAuthors(t.presenid).split(",").join(", "),e.posterid.push(s!==-1?s:null),e.presenid.push(t.presenid),e.title.push(t.title),e.author.push(getAuthors(t.presenid)),a+="<tr id='presen"+t.presenid+"'><td><div> \t"+t.presenid,s!==-1&&(a+="<img class='listToMapBtn' id='listToMap"+s+"' src='"+webroot+"img/logo_posmapp.png' style='zoom: 8%;'></img>");var r=$.inArray(t.presenid,o);a+=r>=0?"<img class='listbookmarkbutton' id='listbookmark"+t.presenid+"' src='"+webroot+"img/bookmark.png' style='zoom: 22%;'></img><br>":"<img class='listbookmarkbutton' id='listbookmark"+t.presenid+"' src='"+webroot+"img/unbookmark.png' style='zoom: 22%;'></img><br>",a+="<span class='listTitle'><strong>"+t.title+"</strong></span><br>",a+="<div class='authors-on-list'><span class='listAuthors'>"+authors+"</span></div></td>",a+="<td><div><td><img class='listToDetailBtn' id='listToDetail"+t.presenid+"' src='"+webroot+"img/detailinfo.png' style='zoom: 3%;'> </img></div>"}})}else presen.forEach(function(t){var s=getPosterid(t.presenid);if(authors=getAuthors(t.presenid).split(",").join(", "),e.posterid.push(s!==-1?s:null),e.presenid.push(t.presenid),e.title.push(t.title),e.author.push(getAuthors(t.presenid)),0!=t.presenid.indexOf("No Presen")){a+="<tr id='presen"+t.presenid+"'><td><div> \t"+t.presenid,s!==-1&&(a+="<img class='listToMapBtn' id='listToMap"+s+"' src='"+webroot+"img/logo_posmapp.png' style='zoom: 8%;'></img>");var n=$.inArray(t.presenid,o);a+=n>=0?"<img class='listbookmarkbutton' id='listbookmark"+t.presenid+"' src='"+webroot+"img/bookmark.png' style='zoom: 22%;'></img><br>":"<img class='listbookmarkbutton' id='listbookmark"+t.presenid+"' src='"+webroot+"img/unbookmark.png' style='zoom: 22%;'></img><br>",a+="<span class='listTitle'><strong>"+t.title+"</strong></span><br>",a+="<div class='authors-on-list'><span class='listAuthors'>"+authors+"</span></div></td>",a+="<td><div><td><img class='listToDetailBtn' id='listToDetail"+t.presenid+"' src='"+webroot+"img/detailinfo.png' style='zoom: 3%;'> </img></div>"}});a+="</table>",$(this).html(a),$(".listToMapBtn").jumpToMapPage(),$(".listToDetailBtn").jumpToDetailPage(),$(".listbookmarkbutton").listchangebookmark(),$(".listTitle").jumpToDetailPage(),$(".listAuthors").jumpToDetailPage(),sessionStorage.setItem("testSessionNum",t)}return e},$.fn.jumpToDetailPage=function(){$(this).on("click",function(e){var t=$(e.target).parents().filter(function(){return"TR"===this.tagName}).get(0).id.substring("presen".length);sessionStorage.setItem("previousPage","presenListPage"),sessionStorage.setItem("listClick","presenlist"),listToDetail(t)})},$.fn.jumpToMapPage=function(){$(this).on("click",function(e){var t=$(e.target).parents().filter(function(){return"TR"===this.tagName}).get(0).id.substring("presen".length),o=getPosterid(t);listToMap(o)})},$.fn.listchangebookmark=function(){$(this).on("click",function(e){var t=e.target.id.substring(12),o=document.getElementById("listbookmark"+t),a=getBookmarks(),s=a.indexOf(t);s!==-1?(a.splice(s,1),null!==o&&(o.src=webroot+"img/unbookmark.png",$("#listbookmark"+t).attr("src",webroot+"img/unbookmark.png")),saveLog("unbookmark",{presenid:t,page:window.location.hash})):(a.push(t),a.sort(),null!==o&&(o.src=webroot+"img/bookmark.png",$("#listbookmark"+t).attr("src",webroot+"img/bookmark.png")),saveLog("bookmark",{presenid:t,page:window.location.hash})),bookmarks=a.join(","),localStorage.setItem("bookmarks",bookmarks),$("#bookmarkList").showBookmarkList(),$("#bookmark-"+t).toggle()})},$.fn.jumpToPresen=function(){$(this).on("click",function(){var e=$(this).attr("id"),t=e.substr(10);sessionStorage.setItem("gotosessionid",t),$(document).on("pageshow","#presenListPage",scrollToTr),changeShowList("presenlist"),changePage("#presenListPage")})},$.fn.changeDate=function(e){var t=$(this).html();$(this).on("click",function(o){$("#sessionDate").html(t);var a=1;for(var s in timetable)document.getElementById("sessiontable"+a).style.display="none",a++;document.getElementById(e).style.display="block"})},$.fn.jumpToVenue=function(){$(this).on("click",function(){changePage("#venuePage")})},$.fn.showTimeTable=function(){var e=$("<p/>").attr("id","changeDateButton").attr("data-role","controlgroup").attr("data-type","horizontal").attr("align","center").addClass("ui-controlgroup-horizontal").addClass("ui-controlgroup").addClass("ui-corner-all");$(this).append(e),$(this).append("<h3 align='center' id='sessionDate'></h3>");var t=$("<div/>").addClass("ui-controlgroup-controls");e.append(t);for(var o in timetable){var a=Number(o)+1,s=$("<a/>").text(timetable[o].day).attr("href","#sessiontable"+a).attr("data-role","button").addClass("sessiontable"+a).addClass("ui-btn").addClass("ui-corner-all");a<10?s.attr("id","changeDate0"+a):s.attr("id","changeDate"+a),t.append(s)}var n=$("<div/>").attr("id","sessiontables");$(this).append(n);for(var o in timetable){var a=Number(o)+1,r=$("<div/>").attr("id","sessiontable"+a).addClass("sessiontable");n.append(r);var i=$("<table/>").addClass("session_table");r.append(i),i.append($("<thead/>")).append("<tr><th>Time</th><th>Room</th><th>Session</th></tr>");var l=$("<tbody/>"),c=timetable[o].schedule;for(var g in c){var p=Object.keys(c[g].sessions).length,m=(c[g].type,0);for(var d in c[g].sessions){var u=$("<tr/>");if(0==m){var f=$("<th/>").addClass("shottime").attr("bgcolor","blue");"all"==c[g].time_display?f.text(""+c[g].start_time+"-"+c[g].end_time):"start_only"==c[g].time_display?f.text(""+c[g].start_time):"no"==c[g].time_display&&f.text(""),p>1&&f.attr("rowspan",c[g].sessions.length),u.append(f)}var h=$("<td/>");"break"==c[g].slot_type&&h.addClass("rest");var v=$("<a/>").text(c[g].sessions[d].room).addClass("jumpToVenue");h.append(v),u.append(h);var k=$("<td/>");if(""!=c[g].sessions[d].sessionid){var b=c[g].sessions[d].sessionid,I=$("<a/>").text(session_map[b].title).attr("id","presenLink"+b).addClass("jumpToPresen");k.append(I)}else k.text(c[g].sessions[d].session_name);"break"==c[g].slot_type&&(f.addClass("rest"),k.addClass("rest")),u.append(k),m++,l.append(u)}}i.append(l)}},$.fn.goToMapPage=function(e){$(this).on(e,function(){changePage("#posterMapPage")})},$.fn.goToListPage=function(e){$(this).on(e,function(){changePage("#presenListPage")})},$.fn.goToInformationPage=function(e){$(this).on(e,function(){changePage("#informationPage"),$("#changeDate01").trigger("click")})},$.fn.goToVenuePage=function(e){$(this).on(e,function(){changePage("#venuePage")})},$.fn.goToTopPage=function(e){var t="#topPage";$(this).on(e,function(){changePage(t)})},$.fn.goToVotePage=function(e){var t="#votePage";$(this).on(e,function(){if(console.log("voteday="+voteDay),console.log("voteday2="+voteDay2),0===voter_param_flag)changePage(t);else if(1===voter_param_flag)return void alert("配布されたQRコードをもう一度読み込んで下さい。");1===already_voted&&voteDay2===voteDay?changePage("#AlreadyVotedPage"):1===already_voted&&voteDay2!==voteDay&&(console.log("clear"),already_voted=0,clear_candidate_data(),changePage(t))})},$.fn.showBasicInfo=function(){$(this).append($("<div/>").attr("id","topPageEventName").text(basic_info.event_name_short));var e=$("<div>").attr("id","topPageEventDescription").append($("<span/>").text(basic_info.event_name_full)).append($("<br/>"));basic_info.start_date!=basic_info.end_date?e.append($("<span/>").text(basic_info.start_date+" - "+basic_info.end_date)).append($("<br/>")):e.append($("<span/>").text(basic_info.start_date)).append($("<br/>")),e.append($("<span/>").text(basic_info.venue)),$(this).append(e),basic_info.event_webpage.indexOf("http")>=0?$("#event-webpage").append($("<a/>").attr("href",basic_info.event_webpage).text(basic_info.event_name_short)):$("#event-webpage").append($("<a/>").attr("href","http://"+basic_info.event_webpage).text(basic_info.event_name_short))};